function preload(){game.load.image("space","assets/images/space.jpg"),game.load.image("bullet","assets/images/bullet.png"),game.load.spritesheet("ship","assets/images/ship_sprite.png",72,72),game.load.image("obstacle","assets/images/obstacle.png"),game.load.image("obstacle2","assets/images/obstacle2.png"),game.load.image("bonus","assets/images/bonus.png"),game.load.spritesheet("kaboom","assets/images/kaboom.png",96,96),game.load.audio("guile",["assets/audio/UseThisGuile1.ogg"]),game.load.audio("hurt",["assets/audio/flappyhit.ogg"]),game.stage.disableVisibilityChange=!0,game.load.image("start","https://cdn0.iconfinder.com/data/icons/mobile-development-icons/128/Start.png",270,180),game.load.image("reset","http://www.level0.ch/mt/img/Sync%20Services%20Icon.png",270,180)}function create(){function a(){game.paused&&(gameOver||(game.paused=!1,menu.destroy(),createObstacles(),createBonus()))}space=game.add.tileSprite(0,0,game.width,game.height,"space"),game.physics.enable(space,Phaser.Physics.ARCADE),space.autoScroll(0,300),game.renderer.clearBeforeRender=!1,game.renderer.roundPixels=!0,music=game.add.audio("guile"),music.loop=!0,music.play(),hurtSnd=game.add.audio("hurt"),game.physics.startSystem(Phaser.Physics.ARCADE),bullets=game.add.group(),bullets.enableBody=!0,bullets.physicsBodyType=Phaser.Physics.ARCADE,bullets.setAll("outOfBoundsKill",!0),bullets.createMultiple(40,"bullet"),bullets.setAll("anchor.x",-.3),bullets.setAll("anchor.y",.2),player=game.add.sprite(300,560,"ship"),player.anchor.set(.5),player.animations.add("ship"),player.animations.play("ship",24,!0),obstacles=game.add.group(),obstacles.enableBody=!0,obstacles.physicsBodyType=Phaser.Physics.ARCADE,resetCounter>=1&&createObstacles(),bonuses=game.add.group(),bonuses.enableBody=!0,bonuses.physicsBodyType=Phaser.Physics.ARCADE,resetCounter>=1&&createBonus(),scoreString="Score : ",scoreText=game.add.text(10,10,scoreString+score,{font:"20px Arial",fill:"#fff"}),highscoreString="High Score: ",highscoreText=game.add.text(10,70,highscoreString+localStorage.getItem("highscore"),{font:"20px Arial",fill:"#fff"}),levelString="Level : ",levelText=game.add.text(10,40,levelString+level,{font:"20px Arial",fill:"#fff"}),game.physics.enable(player,Phaser.Physics.ARCADE),player.body.drag.set(100),player.body.maxVelocity.set(500),explosions=game.add.group(),explosions.createMultiple(5,"kaboom"),explosions.forEach(setupObstacle,this),explosions.forEach(setupPlayer,this),cursors=game.input.keyboard.createCursorKeys(),game.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACEBAR]),gameStarted||(game.paused=!0,menu=game.add.sprite(300,300,"start"),menu.anchor.setTo(.5,.5)),game.input.onTap.addOnce(a,self)}function createObstacles(){function a(){setTimeout(function(){if(level%2==0)var b=obstacles.create(Math.floor(600*Math.random())+1,-100,"obstacle2");else var b=obstacles.create(Math.floor(600*Math.random())+1,-100,"obstacle");b.anchor.setTo(.5,.5),b.body.velocity.y=speed,i++,game.paused||(i%50==0?(6e3>speed&&(speed+=100,level+=1,levelText.text=levelString+level),time>10&&(time-=10),gameOver||a()):gameOver||a())},time)}gameOver||a()}function createBonus(){function a(){if(level%2==0){console.log("created bonus");var a=bonuses.create(Math.floor(500*Math.random())+50,-200,"bonus");a.anchor.setTo(.5,.5),a.body.velocity.y=350,bonusCounter++}}level%2!=0&&(bonusCounter=0),gameOver||0==bonusCounter&&a()}function setupObstacle(a){a.anchor.x=.4,a.anchor.y=.3,a.animations.add("kaboom")}function setupBonus(a){a.anchor.x=.4,a.anchor.y=.3,a.animations.add("bonus")}function setupPlayer(a){a.anchor.x=.4,a.anchor.y=.3,a.animations.add("kaboom")}function update(){player.alive&&(player.body.velocity.setTo(0,0),cursors.left.isDown?player.body.velocity.x=-1200:cursors.right.isDown&&(player.body.velocity.x=1200),player.body.collideWorldBounds=!0,game.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)&&fireBullet()),gameOver||createBonus(),game.physics.arcade.collide(player),game.physics.arcade.overlap(bullets,obstacles,bulletHitsObstacle,null,this),game.physics.arcade.overlap(bullets,bonuses,bulletHitsBonus,null,this),game.physics.arcade.overlap(obstacles,player,obstacleHitsPlayer,null,this),game.physics.arcade.overlap(bonuses,player,bonusHitsPlayer,null,this)}function fireBullet(){var a=100;game.time.now>bulletTime&&(bullet=bullets.getFirstExists(!1),bullet&&(bullet.reset(player.body.x+16,player.body.y+16),bullet.lifespan=1050,bullet.body.velocity.y=-500,a>=40&&level%3==0&&(a-=20),bulletTime=game.time.now+a))}function bulletHitsObstacle(a,b){a.kill(),b.kill(),gameOver||(score+=10,scoreText.text=scoreString+score);var c=explosions.getFirstExists(!1);c.reset(b.body.x,b.body.y),c.play("kaboom",50,!1,!0)}function bulletHitsBonus(a,b){a.kill(),b.kill(),gameOver||(score+=500,scoreText.text=scoreString+score);var c=explosions.getFirstExists(!1);c.reset(b.body.x,b.body.y),c.play("kaboom",50,!1,!0)}function obstacleHitsPlayer(a,b){a.kill(),b.kill(),hurtSnd.play();var c=explosions.getFirstExists(!1);c.reset(a.body.x,a.body.y),c.play("kaboom",50,!1,!0),setGameOver(),score>localStorage.getItem("highscore")&&localStorage.setItem("highscore",score),1==gameOver&&(restartGame=game.add.sprite(300,300,"reset"),restartGame.anchor.setTo(.5,.5),game.input.onTap.addOnce(reset,this))}function bonusHitsPlayer(a,b){a.kill(),b.kill(),hurtSnd.play();var c=explosions.getFirstExists(!1);c.reset(a.body.x,a.body.y),c.play("kaboom",50,!1,!0),setGameOver(),score>localStorage.getItem("highscore")&&localStorage.setItem("highscore",score),1==gameOver&&(restartGame=game.add.sprite(300,300,"reset"),restartGame.anchor.setTo(.5,.5),game.input.onTap.addOnce(reset,this))}function resetBullet(a){a.kill()}function setGameOver(){gameOver=!0,music.stop()}function reset(){restartGame.destroy(),gameStarted=!0,gameOver=!1,score=0,level=1,bulletTime=0,i=0,speed=600,time=250,resetCounter++,obstacles.removeAll(),bonuses.removeAll(),game.state.restart()}function render(){}var game=new Phaser.Game(600,600,Phaser.CANVAS,"project4-game",{preload:preload,create:create,update:update,render:render}),space,player,obstacles,bonuses,cursors,music,explosions,score=0,highscore=0,scoreString="",highscoreString="",scoreText,highscoreText,level=1,levelString="",levelText,bullet,bullets,bulletTime=0,particles,textureRegistry={},gameOver=!1,i=0,speed=600,time=200,gameStarted=!1,resetCounter=0,bonusCounter=0;angular.module("myApp",[]).controller("myController",["$scope","helper",function(a,b){b.sayHi}]).service("helper",function(){return{sayHi:console.log("hi")}});