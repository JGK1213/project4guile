function preload(){game.load.image("space","http://fc03.deviantart.net/fs71/f/2013/269/0/7/peach_tea_animated_cb_6colo_by_missdudette-d6o2o85.gif"),game.load.image("bullet","http://img2.wikia.nocookie.net/__cb20121009064131/pockiepirate/images/9/99/Basic_Energy_Ball.png"),game.load.image("ship","http://www.pixeljoint.com/files/icons/ship2_transparent_shading2.png"),game.load.image("invader","http://www.heruraha.net/download/file.php?avatar=22688_1343737809.png"),game.load.spritesheet("kaboom","http://fc02.deviantart.net/fs71/f/2013/010/9/f/explosion_spritesheet_for_games_by_gintasdx-d5r28q5.png",128,128),game.load.audio("guile",["assets/audio/deadmau5soma.mp3"])}function create(){space=game.add.tileSprite(0,0,800,800,"space"),game.physics.enable(space,Phaser.Physics.ARCADE),space.autoScroll(0,400),game.renderer.clearBeforeRender=!1,game.renderer.roundPixels=!0,music=game.add.audio("guile"),music.play(),game.physics.startSystem(Phaser.Physics.ARCADE),bullets=game.add.group(),bullets.enableBody=!0,bullets.physicsBodyType=Phaser.Physics.ARCADE,bullets.createMultiple(40,"bullet"),bullets.setAll("anchor.x",-.3),bullets.setAll("anchor.y",.2),player=game.add.sprite(400,750,"ship"),player.anchor.set(.5),obstacles=game.add.group(),obstacles.enableBody=!0,obstacles.physicsBodyType=Phaser.Physics.ARCADE,createObstacles(),scoreString="Score : ",scoreText=game.add.text(10,10,scoreString+score,{font:"34px Arial",fill:"#fff"}),game.physics.enable(player,Phaser.Physics.ARCADE),player.body.drag.set(100),player.body.maxVelocity.set(500),explosions=game.add.group(),explosions.createMultiple(50,"kaboom"),explosions.forEach(setupInvader,this),cursors=game.input.keyboard.createCursorKeys(),game.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACEBAR])}function createObstacles(){for(var a=0;4>a;a++)for(var b=0;10>b;b++){var c=obstacles.create(48*b,50*a,"invader");c.anchor.setTo(.5,.5),c.animations.add("fly",[0,1,2,3],20,!0),c.play("fly"),c.body.moves=!1}obstacles.x=100,obstacles.y=50;var d=game.add.tween(obstacles).to({x:200},2e3,Phaser.Easing.Linear.None,!0,0,1e3,!0);d.onLoop.add(descend,this)}function setupInvader(a){a.anchor.x=.5,a.anchor.y=.5,a.animations.add("kaboom")}function descend(){obstacles.y+=10}function update(){player.body.velocity.setTo(0,0),cursors.left.isDown?player.body.velocity.x=-400:cursors.right.isDown&&(player.body.velocity.x=400),player.body.collideWorldBounds=!0,game.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)&&fireBullet(),bullets.forEachExists(screenWrap,this),game.physics.arcade.collide(player),game.physics.arcade.overlap(bullets,obstacles,collisionHandler,null,this)}function collisionHandler(a,b){a.kill(),b.kill(),score+=20,scoreText.text=scoreString+score;var c=explosions.getFirstExists(!1);c.reset(b.body.x,b.body.y),c.play("kaboom",50,!1,!0),0==obstacles.countLiving()&&(score+=1e3,scoreText.text=scoreString+score)}function fireBullet(){game.time.now>bulletTime&&(bullet=bullets.getFirstExists(!1),bullet&&(bullet.reset(player.body.x+16,player.body.y+16),bullet.lifespan=1400,bullet.body.velocity.y=-500,bulletTime=game.time.now+150))}function createBlock(a,b){var c=a+"_"+b;if(textureRegistry[c])return textureRegistry[c];var d=game.add.bitmapData(a,a);return d.ctx.fillStyle=b,d.ctx.fillRect(0,0,a,a),textureRegistry[c]=d,d}function screenWrap(a){a.x<0?a.x=game.width:a.x>game.width&&(a.x=0),a.y<0?a.y=game.height:a.y>game.height&&(a.y=0)}function render(){}var game=new Phaser.Game(800,800,Phaser.CANVAS,"project4-game",{preload:preload,create:create,update:update,render:render}),space,player,obstacles,cursors,music,explosions,score=0,scoreString="",scoreText,bullet,bullets,bulletTime=0,particles,textureRegistry={};angular.module("myApp",[]).controller("myController",["$scope","helper",function(a,b){b.sayHi,a.user={name:"Alfredo",sex:"male"}}]).service("helper",function(){return{sayHi:console.log("hi")}});